<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Enigma Final ‚Äì C√≥digo</title>
    <link rel="stylesheet" href="estilo.css">
</head>

<body class="enigma-body">

    <div class="container">
        <h1>üîê ENIGMA FINAL ‚Äì DECODIFIQUE</h1>

        <div id="timer" class="timer-display">20:00</div>

        <p class="coded-text">
            ‚ñ≤ ; " ‚ñ≥ ‚åò ¬´ ‚ñ† ; ‚ñ≤ " ‚ü°
        </p>

        <p class="instructions">Digite a frase decodificada:</p>
        <input id="resposta" type="text" placeholder="Sua resposta...">

        <button class="btn-solve" onclick="finalizarEnigma()">ENVIAR RESPOSTA</button>
    </div>

    <script>
        const respostaCorreta = "a verdade esta oculta";

        let tempoRestante = 20 * 60;
        const timerElement = document.getElementById("timer");

        const cronometro = setInterval(() => {
            const m = String(Math.floor(tempoRestante / 60)).padStart(2, "0");
            const s = String(tempoRestante % 60).padStart(2, "0");

            timerElement.innerText = `${m}:${s}`;
            tempoRestante--;

            if (tempoRestante < 0) {
                clearInterval(cronometro);
                salvarResultado(false);
            }
        }, 1000);

        function finalizarEnigma() {
            const resposta = document.getElementById("resposta").value.trim().toLowerCase();
            const correta = resposta === respostaCorreta;

            clearInterval(cronometro);
            salvarResultado(correta);
        }

        function salvarResultado(acertou) {
            const nome = prompt("Digite seu nome para o ranking:") || "Jogador";

            const ranking = JSON.parse(localStorage.getItem("rankingGlobal")) || [];

            ranking.push({
                nome,
                tempo: 1200 - tempoRestante,
                status: acertou ? "‚úî Acertou" : "‚úñ Erro/Tempo"
            });

            ranking.sort((a, b) => a.tempo - b.tempo);

            localStorage.setItem("rankingGlobal", JSON.stringify(ranking));

            window.location.href = "ranking.html";
        }
    </script>

</body>
</html>
